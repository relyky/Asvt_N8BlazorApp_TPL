@using Vista.Biz.DEMO
@page "/DEMO009/{qarg1?}"
@attribute [Page("DEMO009", "查詢作業樣板")]
@attribute [Authorize("AuthPage")]

@if (dataAim != null)
{
  <DataView Aim=dataAim OnClose=HandleClose />
}

<MudContainer MaxWidth=MaxWidth.Medium Class=@(dataAim != null ? "d-none" : null)>
  <QueryPanel QArg1=@QArg1 OnRetrieveDataList=HandleRetrieveDataList />
  <DataLister DataList=@dataList OnSelect=HandleSelect />
</MudContainer>

@code {
  [Parameter] public string? QArg1 { get; set; }

  //## State
  List<DEMO009Data> dataList = [];
  DEMO009Data? dataAim = null;

  async Task HandleRetrieveDataList(List<DEMO009Data> _dataList)
  {
    dataList = _dataList;
    await Task.CompletedTask;
  }

  async Task HandleSelect(DEMO009Data data)
  {
    dataAim = data;
    await Task.CompletedTask;
  }

  async Task HandleClose()
  {
    dataAim = null;
    await Task.CompletedTask;
  }
}
